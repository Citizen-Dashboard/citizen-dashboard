(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6823:function(e,s,n){Promise.resolve().then(n.bind(n,7273))},7273:function(e,s,n){"use strict";n.d(s,{default:function(){return h}});var t=n(7437),c=n(2265),a=()=>(0,t.jsx)("div",{className:"navbar bg-neutral text-neutral-content shadow-md",children:(0,t.jsx)("div",{className:"container mx-auto",children:(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Citizen Dashboard Search Tool"})})}),r=n(6463),l=()=>{var e;let[s,n]=(0,c.useState)(""),a=(0,r.useSearchParams)(),{replace:l}=(0,r.useRouter)(),i=(0,r.usePathname)();return(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault();let n=new URLSearchParams(a);s?n.set("query",s):n.delete("query"),l("".concat(i,"?").concat(n.toString()))},children:(0,t.jsx)("div",{className:"flex flex-row items-center",children:(0,t.jsxs)("div",{className:"join p-10 w-screen justify-center",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search",className:"input bg-base-300 join-item w-1/2",onChange:e=>{let s=e.target.value;n(s),console.log("Search term:",s)},defaultValue:null===(e=a.get("query"))||void 0===e?void 0:e.toString()}),(0,t.jsx)("button",{className:"btn btn-primary join-item",type:"submit",children:"Search"})]})})})},i=n(7138);async function o(e){let s=await fetch("".concat("http://127.0.0.1:3001","/search?query=").concat(encodeURIComponent(e)),{method:"GET",headers:{"Content-Type":"application/json"}});return s.ok?await s.json():(console.log(Error("HTTP error! status: ".concat(s.status))),{results:[]})}var d=e=>{let{query:s}=e,[n,a]=(0,c.useState)([]);return(0,c.useEffect)(()=>{o(s).then(e=>{a(e.results)}).catch(e=>{console.error(e)})},[s]),(0,t.jsx)("div",{className:"flex flex-col p-10",children:(0,t.jsx)("div",{className:"flex flex-col w-full",children:n.map(e=>(0,t.jsx)("div",{className:"flex flex-col w-full p-2",children:(0,t.jsx)("div",{className:"card w-full bg-base-100 shadow-xl",children:(0,t.jsxs)("div",{className:"card-body collapse collapse-arrow",children:[(0,t.jsxs)("div",{className:"prose w-full",children:[(0,t.jsx)("h2",{children:e.title}),e.itemStatus&&(0,t.jsx)("p",{children:e.itemStatus}),e.decisionBodyName&&(0,t.jsx)("p",{children:e.decisionBodyName})]}),(0,t.jsxs)("div",{className:"prose",children:[e.decisionAdvice&&(0,t.jsx)("p",{children:e.decisionAdvice}),e.decisionRecommendations&&(0,t.jsx)("p",{children:e.decisionRecommendations}),e.summary&&(0,t.jsx)("p",{children:e.summary})]}),(0,t.jsx)("div",{className:"prose",children:(0,t.jsx)("p",{children:(0,t.jsxs)(i.default,{href:"https://secure.toronto.ca/council/agenda-item.do?item=".concat(e.reference),children:["https://secure.toronto.ca/council/agenda-item.do?item=",e.reference]})})})]})})},e.reference))})})};function u(){let e=(0,r.useSearchParams)().get("query")||"";return(0,t.jsxs)("div",{children:[(0,t.jsx)(a,{}),(0,t.jsx)(l,{}),(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(d,{query:e})})]})}function h(){return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(u,{})})}}},function(e){e.O(0,[291,971,23,744],function(){return e(e.s=6823)}),_N_E=e.O()}]);